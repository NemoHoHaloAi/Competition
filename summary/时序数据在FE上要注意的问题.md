# Time-Series数据在FE上处理时要注意的问题

1. 时刻注意预测数据与训练数据在特征构建上的一致性：
    1. 例如构建dayofyear_store_avg_visitors类的特征；
    2. 首先考虑测试数据对应的dayofyear范围是否被平均包含在训练数据中，假设训练数据从2020年1月到10月，测试数据从2020年11月到12月，那这个特征基本是无意义的，因为11到12月的dayofyear根本不在训练数据中出现，因此对应特征构建结果均为0；
    3. 考虑多个维度下是否都有有意义的值，假设训练数据是2019整年，测试数据是2020年1月到3月，看着时间上是正常的，但是注意如果要根据store维度再细化就要看细化后是否对应特征还是有意义的值而不是0了；
    4. lag、avg类型的特征从时间维度上分为两类：相对值、绝对值，day_block_num就是绝对值，dayofweek就是相对值，相对值也是有相对离散度的，比如dayofyear就比dayofweek更离散一些，越是离散的特征越要考虑是否会导致训练数据与测试数据的特征值分布不一致；
    5. 确保验证集和测试集的各项特征值分布一致性，如果出现某个特征在验证集上有意义，在测试集上都是0，那么最终可能因为这个特征导致过拟合；
2. 一致性检验：
    1. 可以通过对比train和test中对应这些特征；
    2. 对比方式可以选择describe；
3. 问题特征的检验恢复：
    1. 恢复的发起点应该是EDA；
    2. 在EDA中对这些特征依赖的原因数据进行可视化，比如分布情况、时间关系、趋势等等；
    3. 恢复过程中应该时刻谨慎对结果进行describe检验；
